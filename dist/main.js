!function(){"use strict";!function(){const e=document.getElementById("visualizer-canvas"),t=e.getContext("2d");e.width=e.clientWidth,e.height=e.clientHeight;const n=document.getElementById("size");let a;n.addEventListener("input",(function(){a=n.value}));const o=document.getElementById("hue-slider");let c=document.getElementById("hue-value"),l=parseInt(o.value);o.addEventListener("input",(function(){l=parseInt(o.value),c.innerHTML=o.value}));const i=document.getElementById("saturation-slider"),u=document.getElementById("saturation-value");let d=parseInt(i.value);i.addEventListener("input",(function(){d=parseInt(i.value),u.innerHTML=i.value}));const r=document.getElementById("lightness-slider"),s=document.getElementById("lightness-value");let m=parseInt(r.value);r.addEventListener("input",(function(){m=parseInt(r.value),s.innerHTML=r.value}));const h=document.getElementsByName("rainbow-bool"),f=document.getElementById("rainbow-f");let v;function y(n,o,c,i,u){for(let o=0;o<n;o++){i=u[o]*a,t.save(),t.translate(e.width/2,e.height/2),t.rotate(o+2*Math.PI/n);let r="false"===v?l:l*o*5;t.fillStyle="hsl("+r+", "+d+"%, "+m+"%)",t.fillRect(0,0,c,i),t.restore()}}function g(n,o,c,i,u){for(let r=0;r<n;r++){let n="false"===v?l:l*r;i=u[r]*a,t.fillStyle="hsl("+n+", "+d+"%, "+m+"%)",t.fillRect(o,e.height-i,c,i),o+=c}}document.getElementById("rainbow-t").addEventListener("input",(function(e){h.forEach((e=>{e.checked&&(v=e.value)}))})),f.addEventListener("input",(function(e){h.forEach((e=>{e.checked&&(v=e.value)}))}));let p=document.getElementById("audio-element");function E(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}async function I(){let e=E(10,250100);try{let t=await fetch(`https://beatmeupproxy.onrender.com/jamendosound?id=${e}`),n=await t.json();if(1!==n.results.length)return await I();p.src=n.results[0].audio}catch(e){console.log(e)}}async function w(){try{let e=await fetch("https://beatmeupproxy.onrender.com/youtubesound"),t=await e.json(),n=E(0,5142),a=t.arr[n];console.log(t.map[a]);let o=await fetch(`https://beatmeupproxy.onrender.com/youtubesounds?url=${encodeURIComponent(t.map[a])}`),c=await o.blob();console.log(URL.createObjectURL(c)),p.src=URL.createObjectURL(c)}catch(e){console.log(e)}}async function B(){const e=`https://beatmeupproxy.onrender.com/freesound?id=${E(6,682339)}`;try{let t=await fetch(e),n=await t.json();p.src=n.previews["preview-hq-mp3"]}catch(e){console.log(e)}}document.getElementById("music-upload").addEventListener("change",(function(){let e=this.files;p.src=URL.createObjectURL(e[0]),p.load()}));let L=document.getElementById("bar-amount"),b=L.value;L.addEventListener("change",(function(){b=parseInt(L.value)})),window.canvas=document.getElementById("visualizer-canvas");const M=canvas.getContext("2d"),R=document.getElementById("audio-element"),U=new AudioContext;let j,A=U.createAnalyser();A.fftSize=b;let x,q,C=A.frequencyBinCount,k=new Uint8Array(C),z=canvas.width/Math.floor(C-5),S=!0,F=document.getElementById("shape-selector");function H(e){function t(){q=0,M.clearRect(0,0,canvas.width,canvas.height),A.getByteFrequencyData(k),e(C,q,z,x,k),requestAnimationFrame(t)}let n=requestAnimationFrame(t);n&&cancelAnimationFrame(n),"suspended"===U.state&&U.resume(),S&&(j=U.createMediaElementSource(R),j.connect(A),A.connect(U.destination),t(),S=!1),t()}function O(){"rectangle"===F.value?H(g):H(y)}F.addEventListener("change",O),L.addEventListener("change",(function(){A.fftSize=b,C=A.frequencyBinCount,k=new Uint8Array(C),z=canvas.width/Math.floor(C-5)}));let T=document.getElementById("music-api-selector"),$=document.getElementById("random-api-sound-generator"),P=document.getElementById("audio-element");P.volume=.2,document.getElementById("shape-selector"),T.addEventListener("input",(function(){"jamendoAPI"===T.value?$.addEventListener("click",I):"youtube-audio-library"===T.value?$.addEventListener("click",w):$.addEventListener("click",B)})),P.addEventListener("play",O)}()}();
//# sourceMappingURL=main.js.map