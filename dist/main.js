!function(){"use strict";!function(){const e=document.getElementById("visualizer-canvas"),t=e.getContext("2d");e.width=e.clientWidth,e.height=e.clientHeight;const n=document.getElementById("size");let a;n.addEventListener("input",(function(){a=n.value}));const o=document.getElementById("hue-slider");let l=document.getElementById("hue-value"),c=parseInt(o.value);o.addEventListener("input",(function(){c=parseInt(o.value),l.innerHTML=o.value}));const i=document.getElementById("saturation-slider"),u=document.getElementById("saturation-value");let d=parseInt(i.value);i.addEventListener("input",(function(){d=parseInt(i.value),u.innerHTML=i.value}));const s=document.getElementById("lightness-slider"),r=document.getElementById("lightness-value");let m=parseInt(s.value);s.addEventListener("input",(function(){m=parseInt(s.value),r.innerHTML=s.value}));const h=document.getElementsByName("rainbow-bool"),f=document.getElementById("rainbow-f");let v;function g(n,o,l,i,u){for(let o=0;o<n;o++){i=u[o]*a,t.save(),t.translate(e.width/2,e.height/2),t.rotate(o+2*Math.PI/n);let s="false"===v?c:c*o*5;t.fillStyle="hsl("+s+", "+d+"%, "+m+"%)",t.fillRect(0,0,l,i),t.restore()}}function y(n,o,l,i,u){for(let s=0;s<n;s++){let n="false"===v?c:c*s;i=u[s]*a,t.fillStyle="hsl("+n+", "+d+"%, "+m+"%)",t.fillRect(o,e.height-i,l,i),o+=l}}document.getElementById("rainbow-t").addEventListener("input",(function(e){h.forEach((e=>{e.checked&&(v=e.value)}))})),f.addEventListener("input",(function(e){h.forEach((e=>{e.checked&&(v=e.value)}))}));let E=document.getElementById("audio-element");function p(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}async function I(){let e=p(10,250100);try{let t=await fetch(`http://localhost:5000/jamendosound?id=${e}`),n=await t.json();if(1!==n.results.length)return await I();E.src=n.results[0].audio}catch(e){console.log(e)}}async function w(){try{let e=await fetch("http:localhost:5000/youtubesound"),t=await e.json(),n=p(0,5142),a=t.arr[n];console.log(t.map[a]);let o=await fetch(`http://localhost:5000/youtubesounds?url=${encodeURIComponent(t.map[a])}`),l=await o.blob();console.log(URL.createObjectURL(l)),E.src=URL.createObjectURL(l)}catch(e){console.log(e)}}async function B(){const e=`http://localhost:5000/freesound?id=${p(6,682339)}`;try{let t=await fetch(e),n=await t.json();E.src=n.previews["preview-hq-mp3"]}catch(e){console.log(e)}}document.getElementById("music-upload").addEventListener("change",(function(){let e=this.files;E.src=URL.createObjectURL(e[0]),E.load()}));let L=document.getElementById("bar-amount"),b=L.value;L.addEventListener("change",(function(){b=parseInt(L.value)})),window.canvas=document.getElementById("visualizer-canvas");const M=canvas.getContext("2d"),R=document.getElementById("audio-element"),U=new AudioContext;let j,A=U.createAnalyser();A.fftSize=b;let q,C,k=A.frequencyBinCount,z=new Uint8Array(k),S=canvas.width/Math.floor(k-5),F=!0,H=document.getElementById("shape-selector");function x(e){function t(){C=0,M.clearRect(0,0,canvas.width,canvas.height),A.getByteFrequencyData(z),e(k,C,S,q,z),requestAnimationFrame(t)}let n=requestAnimationFrame(t);n&&cancelAnimationFrame(n),"suspended"===U.state&&U.resume(),F&&(j=U.createMediaElementSource(R),j.connect(A),A.connect(U.destination),t(),F=!1),t()}function O(){"rectangle"===H.value?x(y):x(g)}H.addEventListener("change",O),L.addEventListener("change",(function(){A.fftSize=b,k=A.frequencyBinCount,z=new Uint8Array(k),S=canvas.width/Math.floor(k-5)}));let T=document.getElementById("music-api-selector"),$=document.getElementById("random-api-sound-generator"),P=document.getElementById("audio-element");P.volume=.2,document.getElementById("shape-selector"),T.addEventListener("input",(function(){"jamendoAPI"===T.value?$.addEventListener("click",I):"youtube-audio-library"===T.value?$.addEventListener("click",w):$.addEventListener("click",B)})),P.addEventListener("play",O)}()}();
//# sourceMappingURL=main.js.map